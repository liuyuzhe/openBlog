<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
<mapper namespace="com.strongliu.blog.dao.PostDao">
    <select id="selectById" parameterType="String" resultType="Post">
        SELECT * FROM t_post 
        WHERE id=#{id}
    </select>
    
    <select id="selectPrevById" parameterType="String" resultType="Post">
        SELECT id,title FROM t_post
        WHERE createTime &lt;
        (SELECT createTime FROM t_post WHERE id=#{id})
        ORDER BY createTime DESC LIMIT 1
    </select>
    
    <select id="selectNextById" parameterType="String" resultType="Post">
        SELECT id,title FROM t_post
        WHERE createTime &gt;
        (SELECT createTime FROM t_post WHERE id=#{id})
        ORDER BY createTime LIMIT 1
    </select> 
    
    <select id="selectAllByCategoryId" parameterType="String" resultType="Post">
        SELECT id,title,createTime FROM t_post
        WHERE categoryId = #{categoryId}
        ORDER BY createTime DESC
    </select>
  
    <update id="updateReadCount" >
        UPDATE t_post SET rcount=rcount+#{count} 
        WHERE id=#{id}
    </update>
    <update id="updateCommentCount">
        UPDATE t_post SET ccount=ccount+#{count}
        WHERE id=#{id}
    </update>
</mapper>